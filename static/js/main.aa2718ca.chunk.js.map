{"version":3,"sources":["appState.js","drawApi.js","screens/canvas/index.js","screens/canvas/CanvasPad.js","tools/toolpad_comp/PXSize.js","tools/toolpad_comp/DrawingTools.js","tools/toolpad_comp/ColorSwitcher.js","tools/ToolPad.js","tools/layerpad_comp/Player.js","tools/layerpad_comp/LayersList.js","tools/layerpad_comp/Layers.js","tools/LayerPad.js","tools/Menu.js","components/frames.list/index.js","components/frames.list/FramePad.js","components/HeadPad.js","Landing.js","App.js","index.js"],"names":["shortId","require","appState","landing","size","scale","currentFrame","currentLayer","layers","pxSize","onionSkin","addLayer","this","frames","deleteCurrentLayer","deleteLayerData","console","log","order","data","addFrame","index","id","generate","Array","fill","isArray","Object","toConsumableArray","splice","push","indexOf","deleteFrame","length","updateCurrentFrame","getCurrentData","getData","moveLayer","up","curr","next","_ref","playerState","fps","timer","frameIdx","start","playerCnv","document","querySelector","clearInterval","setInterval","animate","bind","cnv","imgData","ctx","getContext","clearRect","width","height","globalCompositeOperation","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","layer","value","img","imagedataToImage","drawImage","err","return","imagedata","canvas","createElement","putImageData","image","Image","src","toDataURL","observable","drawApi","selectedTool","primaryColor","secondaryColor","toolSwitcher","e","pencil","eraser","smoothPencil","bucket","pickColor","sameColorPixel","drawLine","drawCircle","drawRectangle","move","dither","lighter","calcMousePos","nativeEvent","pixelX","offsetX","pixelY","offsetY","x","y","setCtxStyle","temp","which","fillStyle","strokeStyle","getColor","position","_drawApi","target","parentNode","color","getImageData","rgbToHex","apply","r","g","b","toString","concat","destroy","onmousemove","window","onmouseup","drawFill","preventDefault","mouse","fillRect","clearFill","drawMirrorFill","mirror","currentTarget","beginPath","lineWidth","moveTo","lineTo","stroke","startColor","stack","pop","col","row","endPos","startPos","drawCtx","drawCtxData","end","radiusX","radiusY","Math","abs","ellipse","PI","i","strokeRect","changeLight","ammount","ditherDraw","CanvasPad","observer","_React$Component","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","canvasPad","React","createRef","belowCnv","drawCnv","aboveCnv","glowCnv","cnvArr","handleWheel","assertThisInitialized","updateCnvArrScale","inherits","createClass","key","_this2","JSON","stringify","slice","curLayer","react_default","a","className","ref","onContextMenu","handleBelowCanvasRender","style","opacity","handleDrawCanvasRender","handleAboveCanvasRender","onMouseDown","current","querySelectorAll","addEventListener","box","offsetHeight","offsetWidth","side","trunc","forEach","transform","ctrlKey","deltaY","Component","PXSize","arguments","map","data-size","onClick","handleClick","dataset","DrawingTools","classList","toggle","ColorSwitcher","background","type","name","onInput","handleColor","ToolPad","toolpad_comp_PXSize","toolpad_comp_DrawingTools","toolpad_comp_ColorSwitcher","Player","min","max","LayersList","data-layer","random","reverse","Layers","layerpad_comp_LayersList","LayerPad","layerpad_comp_Player","layerpad_comp_Layers","Menu","handleChangeSize","FramePad","number","handleFrameDiv","data-idx","handleCanvasRender","handleAddFrame","frame","getAttribute","HeadPad","Landing","Fragment","App","src_Landing","components_HeadPad","tools_ToolPad","frames_list","screens_canvas","src_tools_LayerPad","src_tools_Menu","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.aa2718ca.chunk.js","sourcesContent":["import { observable } from 'mobx';\nconst shortId = require('shortid');\n\nlet appState = {\n  landing: true,\n  size: 32,\n  scale: 20,\n  currentFrame: 0,\n  currentLayer: 0,\n  layers: 1,\n  pxSize: 1,\n  onionSkin: true,\n\n  addLayer() {\n    this.layers++;\n    this.currentLayer++;\n    frames.addLayer();\n  },\n\n  deleteCurrentLayer() {\n    frames.deleteLayerData();\n    if (this.layers > 1) this.layers--;\n    if (this.currentLayer > 0) {\n      this.currentLayer--;\n    }\n    console.log(this.currentLayer, this.layers)\n  },\n};\n\nlet frames = {\n\n  order: [],//[ID фреймов упорядоченные по кадрам]\n  data: {}, //{ ID фрейма: массив ImageData объектов согласно Layer } \n\n\n  // data может быть как объектом, так и массивом объектов или null\n  // index передается для вставки элемента в центр массива\n  // если index не определен - в конец массива\n  addFrame(data, index) {\n    const id = shortId.generate();\n    if (data === null) data = Array(appState.layers).fill(null);\n    data = Array.isArray(data) ? [...data] : [data]\n\n    this.data[id] = data;\n    index ? this.order.splice(index, 0, id) : this.order.push(id);\n\n    appState.currentFrame = this.order.indexOf(id);\n  },\n\n  deleteFrame(id) {\n    if (this.order.length === 1) {\n      const id = this.order[0];\n      this.data[id] = [null];\n    } else {\n      const index = this.order.indexOf(id);\n      this.order.splice(index, 1);\n      delete this.data[id];\n    }\n    appState.currentFrame = 0;\n  },\n\n  updateCurrentFrame(data) {\n    const frame = this.getCurrentData();\n    frame[appState.currentLayer] = data;\n  },\n\n  getCurrentData() {\n    const id = this.order[appState.currentFrame];\n    return this.data[id];\n  },\n\n  getData(id) {\n    return this.data[id];\n  },\n\n  addLayer() {\n    for (let data in frames.data) {\n      const layers = this.data[data];\n      if (appState.layers > layers.length) layers.push(null);\n    }\n  },\n\n  moveLayer(up) {\n    for (let data in this.data) {\n      const layers = this.data[data];\n      const curr = appState.currentLayer;\n      const next = up ? appState.currentLayer + 1 : appState.currentLayer - 1;\n      [layers[curr], layers[next]] = [layers[next], layers[curr]];\n    }\n    up ? appState.currentLayer++ : appState.currentLayer--;\n  },\n\n  deleteLayerData() {\n    for (let data in this.data) {\n      const layers = this.data[data];\n      layers.splice(appState.currentLayer, 1);\n    }\n  }\n};\n\nlet playerState = {\n  fps: 24,\n  timer: null,\n  frameIdx: 0,\n\n  start() {\n    const playerCnv = document.querySelector('.player-canvas');\n    clearInterval(this.timer);\n    this.timer = setInterval(this.animate.bind(this, playerCnv), 1000 / this.fps)\n  },\n\n  animate(cnv) {\n    if (this.frameIdx >= frames.order.length) this.frameIdx = 0;\n    let id = frames.order[this.frameIdx];\n\n    const imgData = frames.data[id];\n    const ctx = cnv.getContext('2d');\n    ctx.clearRect(0, 0, cnv.width, cnv.height);\n    ctx.globalCompositeOperation = 'source-over';\n\n    for (let layer of imgData) {\n      if (layer == null) continue;\n      const img = this.imagedataToImage(layer);\n      ctx.drawImage(img, 0, 0);\n    }\n    this.frameIdx++;\n  },\n\n  imagedataToImage(imagedata) {\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    canvas.width = imagedata.width;\n    canvas.height = imagedata.height;\n    ctx.putImageData(imagedata, 0, 0);\n\n    var image = new Image();\n    image.src = canvas.toDataURL();\n    return image;\n  }\n}\n\n\nframes = observable(frames);\n\nappState = observable(appState);\n\nplayerState = observable(playerState);\n\nexport { appState, frames, playerState };\n","import { observable } from 'mobx';\nimport { appState, frames } from './appState';\n\nlet drawApi = {\n  pxSize: 1,\n  selectedTool: 'pen',\n  primaryColor: '#00ffff',\n  secondaryColor: '#ff00ff',\n\n  toolSwitcher(e) {\n\n    switch (drawApi.selectedTool) {\n      case 'pen':\n        drawApi.pencil(e, false);\n        break;\n\n      case 'mirror-pen':\n        drawApi.pencil(e, true);\n        break;\n\n      case 'eraser':\n        drawApi.eraser(e);\n        break;\n\n      case 'smooth-pen':\n        drawApi.smoothPencil(e);\n        break;\n\n      case 'paint-bucket':\n        drawApi.bucket(e);\n        break;\n\n      case 'color-picker':\n        drawApi.pickColor(e);\n        break;\n\n      case 'same-color-pixel':\n        drawApi.sameColorPixel(e);\n        break;\n\n      case 'stroke':\n        drawApi.drawLine(e);\n        break;\n\n      case 'circle':\n        drawApi.drawCircle(e);\n        break;\n\n      case 'rectangle':\n        drawApi.drawRectangle(e);\n        break;\n\n      case 'move':\n        drawApi.move(e);\n        break;\n\n      case 'dither':\n        drawApi.dither(e);\n        break;\n\n      case 'lighten-darken':\n        drawApi.lighter(e);\n        break;\n\n      default:\n        break;\n    }\n  },\n\n  calcMousePos(e) {\n    if (e.nativeEvent) e = e.nativeEvent;\n    const pixelX = e.offsetX;\n    const pixelY = e.offsetY;\n    console.log(pixelX, pixelY);\n    return { x: pixelX, y: pixelY };\n  },\n\n  setCtxStyle(e, ctx, fill) {\n    if (e.nativeEvent) e = e.nativeEvent;\n    let temp;\n\n    if (e.which === 1) {\n      temp = drawApi.primaryColor;\n    } else if (e.which === 3) {\n      temp = drawApi.secondaryColor;\n    } else return false;\n\n    if (fill) {\n      ctx.fillStyle = temp;\n    } else {\n      ctx.strokeStyle = temp;\n    }\n\n    return true;\n  },\n\n  getColor(e, position) {\n    const cnv = e.target.parentNode.querySelector('.draw-canvas');\n    const ctx = cnv.getContext('2d');\n\n    if (!position) position = { x: e.offsetX, y: e.offsetY }\n\n    const color = ctx.getImageData(position.x, position.y, 1, 1);\n\n    return drawApi.rgbToHex(...color.data);\n  },\n\n  rgbToHex(r, g, b) {\n    r = r.toString(16);\n    g = g.toString(16);\n    b = b.toString(16);\n\n    if (r.length === 1) r = '0' + r;\n    if (g.length === 1) g = '0' + g;\n    if (b.length === 1) b = '0' + b;\n\n    return `#${(r + g + b)}`;\n  },\n\n  destroy(e) {\n    if (e.nativeEvent) e = e.nativeEvent;\n    const cnv = e.target.parentNode.querySelector('.draw-canvas');\n    const ctx = cnv.getContext('2d');\n    document.querySelector('.pixel-glow-canvas').onmousemove = null;\n    window.onmouseup = null;\n    const data = ctx.getImageData(0, 0, appState.size, appState.size);\n    frames.updateCurrentFrame(data);\n  },\n\n  imagedataToImage(imagedata) {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    canvas.width = imagedata.width;\n    canvas.height = imagedata.height;\n    ctx.putImageData(imagedata, 0, 0);\n\n    const image = new Image();\n    image.src = canvas.toDataURL();\n    return image;\n  },\n\n  drawFill(e) {\n    const cnv = e.target.parentNode.querySelector('.draw-canvas');\n    const ctx = cnv.getContext('2d');\n    e.preventDefault();\n\n    if (!drawApi.setCtxStyle(e, ctx, true)) return false;\n\n    let mouse = drawApi.calcMousePos(e);\n\n    if (drawApi.pxSize > 2) {\n      ctx.fillRect(mouse.x - 2, mouse.y - 2, drawApi.pxSize, drawApi.pxSize)\n    } else {\n      ctx.fillRect(mouse.x, mouse.y - 1, drawApi.pxSize, drawApi.pxSize);\n    }\n  },\n\n  clearFill(e) {\n    const cnv = e.target.parentNode.querySelector('.draw-canvas');\n    const ctx = cnv.getContext('2d');\n\n    let mouse = drawApi.calcMousePos(e);\n\n    if (drawApi.pxSize > 2) {\n      ctx.clearRect(mouse.x - 2, mouse.y - 2, drawApi.pxSize, drawApi.pxSize)\n    } else {\n      ctx.clearRect(mouse.x, mouse.y - 1, drawApi.pxSize, drawApi.pxSize);\n    }\n  },\n\n  drawMirrorFill(e) {\n    const cnv = e.target.parentNode.querySelector('.draw-canvas');\n    const ctx = cnv.getContext('2d');\n    e.preventDefault();\n\n    if (!drawApi.setCtxStyle(e, ctx, true)) return false;\n\n    let mouse = drawApi.calcMousePos(e);\n\n    if (drawApi.pxSize > 2) {\n      ctx.fillRect(mouse.x - 2, mouse.y - 2, drawApi.pxSize, drawApi.pxSize);\n      ctx.fillRect(appState.size - mouse.x - 1, mouse.y - 2, drawApi.pxSize, drawApi.pxSize)\n    } else {\n      ctx.fillRect(mouse.x - 1, mouse.y - 1, drawApi.pxSize, drawApi.pxSize);\n      ctx.fillRect(appState.size - mouse.x, mouse.y - 1, drawApi.pxSize, drawApi.pxSize);\n    }\n  },\n\n  pencil(e, mirror) {\n    e.preventDefault();\n\n    mirror ? drawApi.drawMirrorFill(e) : drawApi.drawFill(e);\n\n    e.currentTarget.onmousemove = mirror ? drawApi.drawMirrorFill : drawApi.drawFill;\n\n    window.onmouseup = drawApi.destroy;\n  },\n\n  smoothPencil(e) {\n    const cnv = e.target.parentNode.querySelector('.draw-canvas');\n    const ctx = cnv.getContext('2d');\n    e.preventDefault();\n\n    ctx.beginPath();\n    if (!drawApi.setCtxStyle(e, ctx, false)) return false;\n\n    ctx.lineWidth = drawApi.pxSize;\n    ctx.moveTo(e.offsetX, e.offsetY);\n    ctx.lineTo(e.offsetX, e.offsetY);\n    ctx.stroke();\n\n    e.currentTarget.onmousemove = e => {\n      ctx.lineTo(e.offsetX, e.offsetY);\n      ctx.stroke();\n    };\n\n    window.onmouseup = drawApi.destroy;\n  },\n\n  eraser(e) {\n    e.preventDefault();\n\n    drawApi.clearFill(e);\n\n    e.currentTarget.onmousemove = drawApi.clearFill;\n\n    window.onmouseup = drawApi.destroy;\n  },\n\n  bucket(e) {\n    if (e.nativeEvent) e = e.nativeEvent;\n\n    const cnv = e.target.parentNode.querySelector('.draw-canvas');\n    const ctx = cnv.getContext('2d');\n\n    if (!drawApi.setCtxStyle(e, ctx, true)) return false;\n\n    const mouse = drawApi.calcMousePos(e);\n    const curFrame = frames.getCurrentData();\n\n    if (!curFrame[appState.currentLayer]) {\n      ctx.fillRect(0, 0, appState.size, appState.size);\n    } else {\n      const startColor = drawApi.getColor(e, mouse);\n\n      if (startColor === ctx.fillStyle) return;\n\n      const stack = [mouse];\n\n      while (stack.length) {\n        const position = stack.pop();\n        const x = position.x;\n        const y = position.y;\n\n        if ((x >= 0 && x < appState.size) && (y >= 0 && y < appState.size)) {\n          const currentColor = drawApi.getColor(e, position);\n          if (startColor === currentColor) {\n            ctx.fillRect(x, y, 1, 1);\n            stack.push({ x: x - 1, y: y }, { x: x + 1, y: y }, { x: x, y: y - 1 }, { x: x, y: y + 1 });\n          }\n        }\n      }\n    }\n\n    const data = ctx.getImageData(0, 0, appState.size, appState.size);\n    frames.updateCurrentFrame(data);\n  },\n\n  sameColorPixel(e) {\n    if (e.nativeEvent) e = e.nativeEvent;\n\n    const cnv = e.target.parentNode.querySelector('.draw-canvas');\n    const ctx = cnv.getContext('2d');\n\n    if (!drawApi.setCtxStyle(e, ctx, true)) return false;\n\n    const mouse = drawApi.calcMousePos(e);\n    const curFrame = frames.getCurrentData();\n\n    if (!curFrame[appState.currentLayer]) {\n      ctx.fillRect(0, 0, appState.size, appState.size);\n    } else {\n      const startColor = drawApi.getColor(e, mouse);\n\n      if (startColor === ctx.fillStyle) return;\n\n      for (let col = 0; col < appState.size; col++) {\n        for (let row = 0; row < appState.size; row++) {\n          const color = drawApi.getColor(e, { x: row, y: col });\n          if (startColor === color) {\n            ctx.fillRect(row, col, 1, 1);\n          }\n        }\n      }\n    }\n\n    const data = ctx.getImageData(0, 0, appState.size, appState.size);\n    frames.updateCurrentFrame(data);\n  },\n\n  pickColor(e) {\n    if (e.nativeEvent) e = e.nativeEvent;\n\n    const color = drawApi.getColor(e);\n\n    if (e.which === 1) {\n      drawApi.primaryColor = color;\n    } else if (e.which === 3) {\n      drawApi.secondaryColor = color;\n    } else return;\n  },\n\n  drawLine(e) {\n    const cnv = e.currentTarget;\n    const ctx = cnv.getContext('2d');\n\n    const startPos = drawApi.calcMousePos(e);\n    let endPos;\n\n    if (!drawApi.setCtxStyle(e, ctx, false)) return false;\n    ctx.lineWidth = drawApi.pxSize;\n\n    cnv.onmousemove = (e) => {\n      ctx.clearRect(0, 0, appState.size, appState.size);\n      ctx.beginPath();\n      ctx.moveTo(startPos.x, startPos.y);\n\n      endPos = drawApi.calcMousePos(e);\n      ctx.lineTo(endPos.x, endPos.y);\n      ctx.stroke();\n    }\n\n    window.onmouseup = (e) => {\n      cnv.onmousemove = null;\n      window.onmouseup = null;\n\n      ctx.clearRect(0, 0, appState.size, appState.size);\n\n      const drawCnv = e.target.parentNode.querySelector('.draw-canvas');\n      const drawCtx = drawCnv.getContext('2d');\n      if (!drawApi.setCtxStyle(e, drawCtx, false)) return false;\n      drawCtx.lineWidth = drawApi.pxSize;\n\n      drawCtx.beginPath();\n      drawCtx.moveTo(startPos.x, startPos.y);\n\n      drawCtx.lineTo(endPos.x, endPos.y);\n      drawCtx.stroke();\n\n      const drawCtxData = drawCtx.getImageData(0, 0, appState.size, appState.size);\n      frames.updateCurrentFrame(drawCtxData);\n    }\n  },\n\n  drawCircle(e) {\n    const cnv = e.currentTarget;\n    const ctx = cnv.getContext('2d');\n\n    const startPos = drawApi.calcMousePos(e);\n    const x = startPos.x;\n    const y = startPos.y;\n    let end;\n    let radiusX;\n    let radiusY;\n\n    if (!drawApi.setCtxStyle(e, ctx, false)) return false;\n    ctx.lineWidth = drawApi.pxSize;\n\n    cnv.onmousemove = (e) => {\n      ctx.clearRect(0, 0, appState.size, appState.size);\n      end = drawApi.calcMousePos(e);\n\n      radiusX = Math.abs(end.x - x);\n      radiusY = Math.abs(end.y - y)\n\n      ctx.beginPath();\n      ctx.ellipse(x, y, radiusX, radiusY, 0, 0, 2 * Math.PI);\n\n      ctx.stroke();\n    }\n\n    window.onmouseup = (e) => {\n      cnv.onmousemove = null;\n      window.onmouseup = null;\n\n      ctx.clearRect(0, 0, appState.size, appState.size);\n\n      const drawCnv = e.target.parentNode.querySelector('.draw-canvas');\n      const drawCtx = drawCnv.getContext('2d');\n      if (!drawApi.setCtxStyle(e, drawCtx, false)) return false;\n      drawCtx.lineWidth = drawApi.pxSize;\n\n      drawCtx.beginPath();\n      for (let i = 0; i < 3; i++) {\n        drawCtx.ellipse(x, y, radiusX, radiusY, 0, 0, 2 * Math.PI);\n      }\n      drawCtx.stroke();\n\n      const drawCtxData = drawCtx.getImageData(0, 0, appState.size, appState.size);\n      frames.updateCurrentFrame(drawCtxData);\n    }\n  },\n\n  drawRectangle(e) {\n    const cnv = e.currentTarget;\n    const ctx = cnv.getContext('2d');\n\n    const startPos = drawApi.calcMousePos(e);\n    const x = startPos.x;\n    const y = startPos.y;\n    let end;\n\n    if (!drawApi.setCtxStyle(e, ctx, false)) return false;\n    ctx.lineWidth = drawApi.pxSize;\n\n    cnv.onmousemove = (e) => {\n      ctx.clearRect(0, 0, appState.size, appState.size);\n      end = drawApi.calcMousePos(e);\n\n      ctx.beginPath();\n      ctx.strokeRect(x, y, end.x - x, end.y - y);\n    }\n\n    window.onmouseup = (e) => {\n      cnv.onmousemove = null;\n      window.onmouseup = null;\n\n      ctx.clearRect(0, 0, appState.size, appState.size);\n\n      const drawCnv = e.target.parentNode.querySelector('.draw-canvas');\n      const drawCtx = drawCnv.getContext('2d');\n      if (!drawApi.setCtxStyle(e, drawCtx, false)) return false;\n      drawCtx.lineWidth = drawApi.pxSize;\n\n      drawCtx.beginPath();\n      for (let i = 0; i < 3; i++) {\n        drawCtx.strokeRect(x, y, end.x - x, end.y - y);\n      }\n\n      const drawCtxData = drawCtx.getImageData(0, 0, appState.size, appState.size);\n      frames.updateCurrentFrame(drawCtxData);\n    }\n  },\n\n  move(e) {\n    if (e.nativeEvent) e = e.nativeEvent;\n\n    const drawCnv = e.target.parentNode.querySelector('.draw-canvas');\n    const drawCtx = drawCnv.getContext('2d');\n\n    const data = drawCtx.getImageData(0, 0, appState.size, appState.size);\n    const start = drawApi.calcMousePos(e);\n    let end;\n\n    e.target.onmousemove = (e) => {\n      drawCtx.clearRect(0, 0, appState.size, appState.size);\n      end = drawApi.calcMousePos(e);\n      drawCtx.putImageData(data, end.x - start.x, end.y - start.y);\n    }\n\n    window.onmouseup = drawApi.destroy;\n  },\n\n  lighter(e) {\n\n    drawApi.changeLight(e);\n\n    e.currentTarget.onmousemove = drawApi.changeLight;\n\n    window.onmouseup = drawApi.destroy;\n  },\n\n  changeLight(e) {\n    if (e.nativeEvent) e = e.nativeEvent;\n    const cnv = e.target.parentNode.querySelector('.draw-canvas');\n    const ctx = cnv.getContext('2d');\n\n    const mouse = drawApi.calcMousePos(e);\n    let x;\n    let y;\n    if (drawApi.pxSize > 2) {\n      x = mouse.x - 2;\n      y = mouse.y - 2;\n    } else {\n      x = mouse.x;\n      y = mouse.y - 1;\n    }\n\n    const layer = ctx.getImageData(x, y, drawApi.pxSize, drawApi.pxSize);\n    const data = layer.data;\n    let ammount;\n\n    if (e.which === 1) {\n      ammount = 2;\n    } else if (e.which === 3) {\n      ammount = -2;\n    } else return false;\n\n    for (let i = 0; i < layer.data.length; i += 4) {\n      data[i] += ammount;\n      data[i + 1] += ammount;\n      data[i + 2] += ammount;\n    }\n\n    ctx.putImageData(layer, x, y);\n  },\n\n  dither(e) {\n    drawApi.ditherDraw(e);\n\n    e.currentTarget.onmousemove = drawApi.ditherDraw;\n\n    window.onmouseup = drawApi.destroy;\n  },\n\n  ditherDraw(e) {\n    if (e.nativeEvent) e = e.nativeEvent;\n    const cnv = e.target.parentNode.querySelector('.draw-canvas');\n    const ctx = cnv.getContext('2d');\n\n    const mouse = drawApi.calcMousePos(e);\n    \n    drawApi.setCtxStyle(e, ctx, true);\n\n    if((mouse.x + mouse.y) % 2) {\n      ctx.fillRect(mouse.x, mouse.y, 1, 1);\n    } else {\n      ctx.clearRect(mouse.x, mouse.y, 1, 1);\n    }\n  },\n}\n\ndrawApi = observable(drawApi);\n\nexport default drawApi;\n","import CanvasPad from './CanvasPad';\n\nexport default CanvasPad;\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport { appState, frames } from '../../appState';\nimport drawApi from '../../drawApi';\n\nconst CanvasPad = observer(\n  class CanvasPad extends React.Component {\n    constructor(props) {\n      super(props);\n      this.canvasPad = React.createRef();\n      this.belowCnv = null;\n      this.drawCnv = null;\n      this.aboveCnv = null;\n      this.glowCnv = null;\n      this.cnvArr = null;\n\n      this.handleWheel = this.handleWheel.bind(this);\n      this.updateCnvArrScale = this.updateCnvArrScale.bind(this);\n    }\n\n    render() {\n      console.log(appState.size,\n        appState.currentLayer,\n        appState.currentFrame,\n        JSON.stringify(frames.data).slice(0, 0));\n      this.updateCnvArrScale();\n      const curLayer = appState.currentLayer;\n      const curFrame = appState.currentFrame;\n      return (\n        <div\n          className=\"canvas-pad\"\n          ref={this.canvasPad}\n          onContextMenu={e => e.preventDefault()}\n        >\n          <canvas\n            className=\"background-canvas\"\n            width={appState.size}\n            height={appState.size}\n          >\n          </canvas>\n          <canvas\n            className=\"layers-below-canvas\"\n            width={appState.size}\n            height={appState.size}\n            ref={(cnv) => {\n              this.belowCnv = cnv;\n              this.handleBelowCanvasRender(cnv, curLayer);\n            }}\n            style={{opacity: appState.onionSkin ? 0.4 : 0 }}\n          >\n          </canvas>\n          <canvas\n            width={appState.size}\n            height={appState.size}\n            className='draw-canvas'\n            ref={(cnv) => {\n              this.drawCnv = cnv;\n              this.handleDrawCanvasRender(cnv, curLayer);\n            }}\n          >\n          </canvas>\n          <canvas\n            className=\"layers-above-canvas\"\n            width={appState.size}\n            height={appState.size}\n            ref={(cnv) => {\n              this.aboveCnv = cnv;\n              this.handleAboveCanvasRender(cnv, curLayer);\n            }}\n            style={{opacity: appState.onionSkin ? 0.4 : 0 }}\n          >\n          </canvas>\n          <canvas\n            className=\"pixel-glow-canvas\"\n            width={appState.size}\n            height={appState.size}\n            onMouseDown={drawApi.toolSwitcher}\n          >\n          </canvas>\n        </div>\n      );\n    }\n\n    handleBelowCanvasRender(cnv, currentLayer) {\n      if (!cnv) return;\n      const ctx = cnv.getContext('2d');\n      ctx.globalCompositeOperation = 'source-over';\n      ctx.clearRect(0, 0, cnv.width, cnv.height);\n      const data = frames.getCurrentData();\n      for(let i = 0; i < currentLayer; i++) { \n        if (!data[i]) continue;\n        const img = drawApi.imagedataToImage(data[i]);\n        ctx.drawImage(img, 0, 0);\n      }\n    }\n\n    handleDrawCanvasRender(cnv, currentLayer) {\n      if (!cnv) return;\n      const ctx = cnv.getContext('2d');\n      ctx.clearRect(0, 0, cnv.width, cnv.height);\n      const data = frames.getCurrentData();\n      const curLayer = data[currentLayer];\n      if(!curLayer) return;\n      ctx.putImageData(curLayer, 0, 0);\n    }\n\n    handleAboveCanvasRender(cnv, currentLayer) {\n      if (!cnv) return;\n      const ctx = cnv.getContext('2d');\n      ctx.globalCompositeOperation = 'source-over';\n      ctx.clearRect(0, 0, cnv.width, cnv.height);\n      const data = frames.getCurrentData();\n      for(let i = currentLayer + 1; i < data.length; i++) { \n        if (!data[i]) continue;\n        const img = drawApi.imagedataToImage(data[i]);\n        ctx.drawImage(img, 0, 0);\n      }\n    }\n\n    componentDidMount() {\n      this.cnvArr = this.canvasPad.current.querySelectorAll('canvas');\n      this.updateCnvArrScale();\n      this.canvasPad.current.addEventListener('wheel', this.handleWheel, false);\n    }\n\n    updateCnvArrScale() {\n      if (!this.drawCnv) return;\n\n      let box = this.canvasPad.current;\n\n      if (appState.scale <= 1) {\n        appState.scale = 1;\n      }\n\n      if (appState.scale * appState.size > box.offsetHeight\n        || appState.scale * appState.size > box.offsetWidth) {\n        const side = box.offsetHeight >= box.offsetWidth\n          ? box.offsetWidth\n          : box.offsetHeight;\n        appState.scale = Math.trunc(side / appState.size);\n      }\n\n      this.cnvArr.forEach(cnv => {\n        cnv.style.transform = 'scale(' + appState.scale + ')';\n      });\n    }\n\n    handleWheel(e) {\n      if (e.ctrlKey) {\n        e.preventDefault();\n        appState.scale += e.deltaY > 0 ? -2 : 2;\n        this.updateCnvArrScale();\n      }\n    }\n  }\n);\n\nexport default CanvasPad;\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport { appState } from '../../appState';\nimport drawApi from '../../drawApi';\n\nconst PXSize = observer(\n  class PXSize extends React.Component {\n    \n    render() {\n      return (\n        <div \n          className=\"pixel-size\"\n        >\n          {[1, 2, 3, 4].map((size) => {\n            return (\n              <div \n                data-size={size} \n                className={size === drawApi.pxSize ? 'selected' : ''}\n                onClick={this.handleClick}\n              >\n                <div className={'size-' + size}></div>\n              </div>\n            );\n          })}\n        </div>\n      );\n    }\n\n    handleClick(e) {\n      const target = e.currentTarget;\n      drawApi.pxSize = +target.dataset.size;\n    }\n  }\n);\n\nexport default PXSize;\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport drawApi from '../../drawApi';\n\nconst DrawingTools = observer(\n  class DrawingTools extends React.Component {\n    render() {\n      return (\n        <ul \n          className=\"drawing-tools\"\n          onClick={this.handleClick}\n        >\n          <li className=\"pen selected\"></li>\n          <li className=\"mirror-pen\"></li>\n          <li className=\"paint-bucket\"></li>\n          <li className=\"same-color-pixel\"></li>\n          <li className=\"eraser\"></li>\n          <li className=\"stroke\"></li>\n          <li className=\"circle\"></li>\n          <li className=\"rectangle\">&#9645;</li>\n          <li className=\"move\"></li>\n          {/* <li className=\"select-rect\"></li>\n          <li className=\"select-line\"></li> */}\n          <li className=\"lighten-darken\"></li>\n          <li className=\"dither\"></li>\n          <li className=\"color-picker\"></li>\n          <li className=\"smooth-pen\">&#128394;</li>\n        </ul>\n      );\n    }\n\n    handleClick(e) {\n      if(e.target.className === 'drawing-tools') return;\n\n      const selected = e.currentTarget.querySelector('.selected');\n      selected.classList.toggle('selected');\n      drawApi.selectedTool = e.target.className;\n      e.target.classList.toggle('selected');\n    }\n  }\n);\nexport default DrawingTools;\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport { appState, drawState } from '../../appState';\nimport drawApi from '../../drawApi';\n\nconst ColorSwitcher = observer(\n  class ColorSwitcher extends React.Component {\n    \n    render() {\n      return (\n        <div className=\"color-switcher\">\n          <label \n            className=\"primary-color\" \n            style={{ background: drawApi.primaryColor }}\n          >\n            <input\n              type=\"color\"\n              name=\"primary\"\n              id=\"primary\"\n              onInput={this.handleColor}\n            />\n          </label>\n          <label \n            className=\"secondary-color\"\n            style={{ background: drawApi.secondaryColor }}\n          >\n            <input \n              type=\"color\" \n              name=\"secondary\" \n              id=\"secondary\"\n              onInput={this.handleColor}\n            />\n          </label>\n        </div>\n      );\n    }\n\n    handleColor(e) {\n      drawApi[`${e.currentTarget.id}Color`] = e.currentTarget.value;\n    }\n  }\n);\n\nexport default ColorSwitcher;\n","import React from 'react';\nimport { PXSize, DrawingTools, ColorSwitcher } from './toolpad_comp/';\nimport { observer } from 'mobx-react';\n\n\nconst ToolPad = observer(\n  class ToolPad extends React.Component {\n    render() {\n      return (\n        <section className=\"tool-pad\">\n          <PXSize />\n          <DrawingTools />\n          <ColorSwitcher />\n        </section>\n      );\n    }\n  }\n);\n\nexport default ToolPad;\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport { appState, playerState } from '../../appState';\n\nconst Player = observer(\n  class Player extends React.Component {\n    render() {\n      return (\n        <div className=\"player\">\n          <div className=\"player-canvas-container\">\n            <canvas\n              className=\"player-canvas\"\n              width={appState.size}\n              height={appState.size}\n            >\n            </canvas>\n          </div>\n          <div className=\"player-controls\">\n            <button className=\"fullscreen\">&#9645;</button>\n            <div className=\"player-fps\">FPS{playerState.fps}</div>\n            <input\n              type=\"range\"\n              name=\"input-fps\"\n              id=\"input-fps\"\n              min={1}\n              max={24}\n              onInput={(e) => { playerState.fps = e.currentTarget.value; playerState.start() }}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    componentDidMount() {\n      playerState.start();\n    }\n  }\n);\n\nexport default Player;\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport { appState } from '../../appState';\n// import { appState, frames } from '../../appState';\n\nconst LayersList = observer(\n  class LayersList extends React.Component {\n    render() {\n      return (\n        <div \n          className=\"layers-list\"\n          onClick={this.handleClick}\n        >\n          {new Array(appState.layers).fill(null).map((layer, id) => {\n            return (\n            <div \n              className={\"layer-\" + id + (appState.currentLayer === id ? ' selected' : '')}\n              data-layer={id}\n              key={Math.random()}           \n            >\n              layer {id}\n            </div>\n            );\n          }).reverse()        \n          }\n        </div>\n      );\n    }\n\n    handleClick(e) {\n      e = e.nativeEvent;\n      if (e.target === e.currentTarget) return;\n      appState.currentLayer = +e.target.dataset.layer; \n    }\n  }\n);\n\nexport default LayersList;\n","import React from 'react';\nimport { observer } from 'mobx-react';\n// import { appState } from '../../appState';\nimport { appState, frames } from '../../appState';\nimport LayersList from './LayersList';\n\nconst Layers = observer(\n  class Layers extends React.Component {\n    render() {\n      return (\n        <div className=\"layers\">\n          <div className='component-name'>\n            <div>Layers</div>\n            <button \n              className={\"show-all-layers\" + (appState.onionSkin ? \" checked\" : \"\")}\n              onClick={() => {appState.onionSkin = !appState.onionSkin}}            \n            >&#128065;</button>\n          </div>\n          <div className=\"layers-control\" onClick={this.handleClick}>\n            <button className=\"layer-add\">+</button>\n            <button className=\"layer-up\">&#129093;</button>\n            <button className=\"layer-down\">&#129095;</button>\n            <button className=\"layer-edit\">&#128393;</button>\n            <button className=\"layer-merge-below\">&#11123;</button>\n            <button className=\"layer-delete\">&#10005;</button>\n          </div>\n          <LayersList />\n        </div>\n      );\n    }\n\n    handleClick(e) {\n      switch (e.target.className) {\n        case 'layer-add':\n          appState.addLayer();\n          break;\n\n        case 'layer-delete':\n          appState.deleteCurrentLayer();\n          break;\n\n        case 'layer-up':\n          frames.moveLayer(true);\n          break;\n\n        case 'layer-down':\n          frames.moveLayer(false);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n);\n\nexport default Layers;\n","import React from 'react';\nimport { observer } from 'mobx-react';\n// import { appState, frames } from '../appState';\nimport { Player, Layers } from './layerpad_comp/';\nimport './LayerPad.css';\n\nconst LayerPad = observer(\n  class LayerPad extends React.Component {\n    render() {\n      return (\n        <section className=\"layer-pad\">\n          <Player />\n          <Layers />\n        </section>\n      );\n    }\n  }\n);\n\nexport default LayerPad;\n","import React from 'react';\nimport { appState } from '../appState';\nimport './Menu.css';\n// import drawApi from '../drawApi';\nimport { observer } from 'mobx-react';\n\nconst Menu = observer(\n  class Menu extends React.Component {\n    render() {\n      return (\n        <section className=\"menu\">\n          <button\n            className=\"canvas-size\"\n            data-size={appState.size}\n            onClick={this.handleChangeSize}\n\n          >{appState.size}</button>\n        </section>\n      );\n    }\n\n\n    handleChangeSize(e) {\n      const size = +e.currentTarget.dataset.size;\n      if (size === 32) {\n        appState.scale /= 2;\n        appState.size = 64;\n      } else if (size === 64) {\n        appState.scale /= 2;\n        appState.size = 128;\n      } else {\n        appState.scale *= 4;\n        appState.size = 32;\n      }\n    }\n  }\n);\n\nexport default Menu;\n","import FramePad from './FramePad';\r\n\r\nexport default FramePad;\r\n","import React from 'react';\nimport './FramePad.css';\nimport { observer } from 'mobx-react';\nimport { appState, frames } from '../../appState';\n\n\nconst FramePad = observer(\n  class FramePad extends React.Component {\n    render() {\n      console.log(`RENDER STARTED`, JSON.stringify(frames.data).slice(0, 0), appState.currentLayer);\n      return (\n        <section className='frame-pad'>\n          {frames.order.map(\n            (id, number) =>\n              <div\n                className={'frame' + (number === appState.currentFrame ? ' selected' : '')}\n                key={Math.random()}\n                id={id}\n                onClick={this.handleFrameDiv}\n              >\n                <button className=\"delete-frame\"></button>\n                <button className=\"duplicate-frame\"></button>\n                <div className=\"number-frame\" data-idx={number}>{number + 1}</div>\n                <canvas\n                  width={appState.size}\n                  height={appState.size}\n                  ref={(canvas) => {this.handleCanvasRender(canvas, frames.data[id])}}\n                ></canvas>                \n              </div>\n          )}\n          <button\n            className='add-frame'\n            onClick={this.handleAddFrame}\n          >+</button>\n        </section>\n      );\n    }\n\n    componentDidMount() {\n      frames.addFrame(null);\n    }\n\n    handleCanvasRender(cnv, data) {\n      if(!cnv) return;\n      const ctx = cnv.getContext('2d');\n      ctx.clearRect(0, 0, cnv.width, cnv.height);\n      const curLayer = data[appState.currentLayer];\n      if(!curLayer) return;\n      ctx.putImageData(curLayer, 0, 0);\n    }\n\n    handleFrameDiv(e) {\n      const frame = e.currentTarget;\n      switch (e.target.className) {\n        case \"delete-frame\":\n          frames.deleteFrame(frame.id);\n          break;\n\n        case \"duplicate-frame\":\n          const data = frames.getData(frame.id)\n          const index = frames.order.indexOf(frame.id)\n          frames.addFrame(data, index + 1);\n          break;\n\n        default:\n          const div = frame.querySelector('.number-frame');\n          const value = +div.getAttribute('data-idx');\n          appState.currentFrame = value;\n          break;\n      }\n    }\n\n\n    handleAddFrame() {\n      frames.addFrame(null);\n    }\n  }\n);\n\nexport default FramePad;\n","import React from 'react';\r\n\r\nclass HeadPad extends React.Component {\r\n  render() {\r\n    return (\r\n      <header>\r\n        <h1>PiSKEL</h1>\r\n        <h2>{this.props.name}</h2>\r\n        <div className='header-buttons'>\r\n          <button className=\"create-sprite\">Create Sprite</button>\r\n        </div>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HeadPad;\r\n","import React from 'react';\n// import CanvasPad from './screens/canvas/';\n// import { ToolPad, LayerPad, Menu } from './tools';\n// import FramePad from './components/frames.list';\n// import HeadPad from './components/HeadPad';\nimport { observer } from 'mobx-react';\nimport { appState } from './appState';\n\n\nconst Landing = observer(\n  class Landing extends React.Component {\n    render() {\n      return (\n        <>\n          <main className=\"landing-box\">\n            <div className=\"landing-screenshot\"></div>\n            <div className=\"landing-info\">\n              <h1 className=\"landing-h1\">PiSKEL clone</h1>\n              <p className=\"landing-p\">Perfect application for\n                creating and editing pixelated sprites</p>\n              <button\n                className=\"landing-button\"\n                onClick={() => { appState.landing = false }}\n              >Create your Sprite</button>\n            </div>\n          </main>\n        </>\n      );\n    }\n  }\n);\n\nexport default Landing;\n","import React from 'react';\nimport CanvasPad from './screens/canvas/';\nimport { ToolPad, LayerPad, Menu } from './tools';\nimport FramePad from './components/frames.list';\nimport HeadPad from './components/HeadPad';\nimport { observer } from 'mobx-react';\nimport { appState } from './appState';\nimport Landing from './Landing';\n\n\nconst App = observer(\n  class App extends React.Component {\n    render() {\n      if (appState.landing) {\n        return (\n          <>\n            <Landing />\n          </>\n        );\n      } else {\n        return (\n          <>\n            <HeadPad name='New Piskel *' />\n            <main>\n              <ToolPad />\n              <FramePad />\n              <CanvasPad />\n              <LayerPad />\n              <Menu />\n            </main>\n          </>\n        );\n      }\n      \n    }\n  }\n);\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './App.css';\nimport './fonts/fontello.css';\nimport './tools/ToolPad.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}